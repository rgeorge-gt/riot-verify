<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Unsupervised Learning – DSAN-5000: Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/gu-logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">DSAN-5000: Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../instructions/overview.html"> 
<span class="menu-text">Instructions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../report/report.html"> 
<span class="menu-text">Report</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-technical-details" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Technical details</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-technical-details">    
        <li>
    <a class="dropdown-item" href="../../technical-details/data-collection/main.html">
 <span class="dropdown-text">Data-collection</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/data-cleaning/main.html">
 <span class="dropdown-text">Data-cleaning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/eda/main.html">
 <span class="dropdown-text">Exploratory Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/unsupervised-learning/main.html">
 <span class="dropdown-text">Unsupervised Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/supervised-learning/main.html">
 <span class="dropdown-text">Supervised Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/progress-log.html">
 <span class="dropdown-text">Progress Log</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/llm-usage-log.html">
 <span class="dropdown-text">LLM usage Log</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction:</a>
  <ul class="collapse">
  <li><a href="#part-1-dimensionality-reduction" id="toc-part-1-dimensionality-reduction" class="nav-link" data-scroll-target="#part-1-dimensionality-reduction">Part 1: Dimensionality Reduction</a></li>
  <li><a href="#part-2-clustering-methods" id="toc-part-2-clustering-methods" class="nav-link" data-scroll-target="#part-2-clustering-methods">Part 2: Clustering Methods</a></li>
  </ul></li>
  <li><a href="#code" id="toc-code" class="nav-link" data-scroll-target="#code">Code</a></li>
  <li><a href="#this-size-is-a-massive-issue.-way-to-much-for-me-to-run." id="toc-this-size-is-a-massive-issue.-way-to-much-for-me-to-run." class="nav-link" data-scroll-target="#this-size-is-a-massive-issue.-way-to-much-for-me-to-run.">This size is a massive issue. Way to much for me to run.</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Unsupervised Learning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- After digesting the instructions, you can delete this cell, these are assignment instructions and do not need to be included in your final submission.  -->
<section id="introduction" class="level1">
<h1>Introduction:</h1>
<p>In this section, I will be using awnsering the following data science questions: What are meta comps among top level TFT player boards? What are meta comps among players who place top 4?</p>
<p>Champions in TFT have unique abilites and share types. A basic strategy is composing a team of unit that share traits because of bonuses given to units that share traits. For example, in Set 15, Ahiri and Jinx are both Star Guardians. When they are on the board together, they each get a unique bonus. The more Star Guardians are on the board, the greater the bonus. This aims to find common champion pairings at top level play. Originally, I was going to use hierachial clustering, but I switched over to DBSCAN.</p>
<p>Using my cleaned dataset, I created a new binary dataset that showed how many frequency of unit appearance.</p>
<p>My main issue was the size of the dataset. Original shape = (32455, 63) which would cause Jupyter to take to long or outright crash. So I decided to first remove duplicates and then perform PCA (Principal Component Analysis) if necessary. My reasoning for this is that duplicates do not improve the performance or content of DBSCAN while PCA removes potentially useful data. Removing the duplicates was the right call, cutting the shape down to (10757, 31). This is about a third of what we started but it makes sense. We are only looking at the list of units a player employed without consideration of other variables such as star level, items, or auguments. Despite the games innate RNG, top players are very consistent at bulding top level meta comps.</p>
<p>#Methods HDBSCAN (Hierarchical Density-Based Spatial Clustering of Applications with Noise) - HDBSCAN is a clustering algorithm build upon DBSCAN.</p>
<p>TSNE -</p>
<p>#Results Section: Below are the HDBSCAN clusters shown in TSNE form.</p>
<p>Below are the 13 clusters produced. The left hand side is the units name and the right hand side is the frequency of appearance.</p>
<p>=== Noise (cluster -1) === Braum 0.411457 Swain 0.389261 Udyr 0.342908 Shen 0.312061 XinZhao 0.292639 Sett 0.289212 LeeSin 0.279745 Zyra 0.278603 Leona 0.269463 Rell 0.260976 dtype: float64</p>
<p>=== Cluster 0 === Malphite 0.986595 Janna 0.949062 Ziggs 0.790885 Sivir 0.772118 Shen 0.764075 Ryze 0.584450 JarvanIV 0.546917 TwistedFate 0.337802 KSante 0.300268 Neeko 0.249330 dtype: float64</p>
<p>=== Cluster 1 === Ryze 0.98750 JarvanIV 0.98125 Akali 0.95625 Darius 0.85625 Kennen 0.85000 Senna 0.77500 KSante 0.71875 Aatrox 0.61250 LeeSin 0.41875 Janna 0.19375 dtype: float64</p>
<p>The core of Cluster 1 is Ryze, JarvanIV, Akali, Darius, Kennen, and KSante. Aatorox and LeeSin are secondary. While Janna is a fringe choice.</p>
<p>=== Cluster 2 === Kobuko 1.000000 Udyr 0.990950 Aatrox 0.977376 Ryze 0.927602 JarvanIV 0.809955 Senna 0.733032 Janna 0.705882 Yasuo 0.411765 KSante 0.285068 Volibear 0.194570 dtype: float64</p>
<p>Kobuko is the most valuable unit of Comp 2. Udyr, Aatrox, and Ryze are also staples.</p>
<p>KSante and Volibear are fringe picks.</p>
<p>=== Cluster 3 === Lucian 0.994253 Karma 0.994253 Aatrox 0.982759 Senna 0.982759 JarvanIV 0.977011 Gangplank 0.890805 Yone 0.712644 Ryze 0.706897 LeeSin 0.275862 Volibear 0.178161 dtype: float64</p>
<p>Staples of Cluster 3 are Lucian 0.994253 Karma 0.994253 Aatrox 0.982759 Senna 0.982759 JarvanIV 0.977011 Gangplank 0.890805</p>
<p>Yone, Ryze are secondary.</p>
<p>LeeSin, and Volibear are fringe</p>
<p>=== Cluster 4 === Karma 1.000000 Lucian 0.988439 Swain 0.982659 JarvanIV 0.971098 Lux 0.849711 Ryze 0.786127 Gwen 0.774566 Kennen 0.641618 Braum 0.341040 KSante 0.341040 dtype: float64</p>
<p>This Cluster contains all of the units found in Stier comp Me Mech. This is a Mighty Mech team built around taking advantage of Mighty Mech trait.</p>
<p>=== Cluster 5 === Poppy 0.985229 Jinx 0.982275 Neeko 0.901034 Rell 0.821270 Kobuko 0.769572 KSante 0.748892 Seraphine 0.556869 Xayah 0.546529 Varus 0.521418 Braum 0.462334 dtype: float64</p>
<p>Cluster 5 is a StarGuardian team based around Poppy, Jinx, Neeko, and Rell. Kobuko and KSante compliment Poppys ability to hold the front line.</p>
<p>=== Cluster 6 === Garen 0.978333 Rakan 0.941667 Ezreal 0.925000 Leona 0.883333 Yuumi 0.870000 Jayce 0.566667 Katarina 0.556667 Ryze 0.331667 KSante 0.331667 Malzahar 0.318333 dtype: float64</p>
<p>=== Cluster 7 === Malzahar 0.700422 Darius 0.696203 Zac 0.677918 Kobuko 0.593530 Poppy 0.530239 Jayce 0.507736 Rammus 0.385373 Aatrox 0.372714 Seraphine 0.288326 Syndra 0.218003 dtype: float64</p>
<p>=== Cluster 8 === Rell 0.976048 Leona 0.976048 Braum 0.916168 Swain 0.910180 Shen 0.892216 XinZhao 0.892216 Seraphine 0.862275 TwistedFate 0.844311 Zyra 0.670659 Syndra 0.287425 dtype: float64</p>
<p>=== Cluster 9 === Sett 0.993377 Samira 0.986755 XinZhao 0.986755 Naafiri 0.966887 Lux 0.947020 Gwen 0.788079 Volibear 0.761589 Viego 0.576159 Braum 0.423841 Kalista 0.390728 dtype: float64</p>
<p>=== Cluster 10 === Udyr 0.984308 Sett 0.831669 DrMundo 0.815977 Naafiri 0.784593 LeeSin 0.681883 Vi 0.650499 TwistedFate 0.529244 Braum 0.526391 Zyra 0.510699 Aatrox 0.452211 dtype: float64</p>
<p>This comp contains the champions used in the S Tier Juggernaut Jackpot Comp. Source: https://mobalytics.gg/tft/champions/dr-mundo Comp uses Zyra, LeeSin, and TwistedFate to deal damage. Sett and the other Juggernauts are backup to form a wall.</p>
<p>=== Cluster 11 === Swain 0.977011 Janna 0.975096 Ashe 0.957854 Vi 0.823755 JarvanIV 0.821839 KSante 0.816092 Zyra 0.775862 Braum 0.599617 Udyr 0.570881 LeeSin 0.496169 dtype: float64</p>
<p>Primary: Swain Janna Ashe Vi JarvanIV KSante<br>
Secondary: Braum, Udyr, and LeeSin</p>
<p>The units with the highest total usage are: Jarvan IV, Ryze, Aatrox, KSante, Braum</p>
<p>Which indicates to me, that they are top tier units during Game Version 15.22.</p>
<section id="part-1-dimensionality-reduction" class="level3">
<h3 class="anchored" data-anchor-id="part-1-dimensionality-reduction">Part 1: Dimensionality Reduction</h3>
<p>The objective of this section is to explore and demonstrate the effectiveness of PCA and t-SNE in reducing the dimensionality of complex data while preserving essential information and improving visualization.</p>
<ol type="1">
<li><strong>PCA (Principal Component Analysis):</strong>
<ul>
<li>Apply PCA to your dataset.</li>
<li>Determine the optimal number of principal components.</li>
<li>Visualize the reduced-dimensional data.</li>
<li>Analyze and interpret the results.</li>
</ul></li>
<li><strong>t-SNE (t-distributed Stochastic Neighbor Embedding):</strong>
<ul>
<li>Implement t-SNE on the same dataset.</li>
<li>Experiment with different perplexity values.</li>
<li>Visualize the t-SNE output to reveal patterns and clusters.</li>
<li>Compare the results of t-SNE with those from PCA.</li>
</ul></li>
<li><strong>Evaluation and Comparison:</strong>
<ul>
<li>Evaluate the effectiveness of PCA and t-SNE in preserving data structure.</li>
<li>Compare the visualization capabilities of both techniques.</li>
<li>Discuss the trade-offs and scenarios where one technique may perform better than the other.</li>
</ul></li>
</ol>
</section>
<section id="part-2-clustering-methods" class="level3">
<h3 class="anchored" data-anchor-id="part-2-clustering-methods">Part 2: Clustering Methods</h3>
<p>Apply clustering techniques (K-Means, DBSCAN, and Hierarchical clustering) to a selected dataset. The goal is to understand how each method works, compare their performance, and interpret the results.</p>
<ol type="1">
<li><strong>Clustering Methods:</strong>
<ul>
<li>Apply <strong>K-Means</strong>, <strong>DBSCAN</strong>, and <strong>Hierarchical clustering</strong> to your dataset.</li>
<li>Write a technical summary for each method (2–4 paragraphs per method) explaining how it works, its purpose, and any model selection methods used (e.g., Elbow, Silhouette).</li>
</ul></li>
<li><strong>Results Section:</strong>
<ul>
<li>Discuss and visualize the results of each clustering analysis.</li>
<li>Compare the performance of different clustering methods, noting any insights gained from the analysis.</li>
<li>Visualize cluster patterns and how they relate (if at all) to existing labels in the dataset.</li>
<li>Use professional, labeled, and clear visualizations that support your discussion.</li>
</ul></li>
<li><strong>Conclusion:</strong>
<ul>
<li>Summarize the key findings and their real-world implications in a non-technical way. Focus on the most important results and how they could apply to practical situations.</li>
</ul></li>
</ol>
</section>
</section>
<section id="code" class="level1">
<h1>Code</h1>
<div id="cell-3" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Import packages this file uses</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ast</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hdbscan</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MultiLabelBinarizer</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.manifold <span class="im">import</span> TSNE</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-4" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Import singlar combined csv file from processed data as a pandas df</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>dfTFT <span class="op">=</span> pd.read_csv(<span class="st">"../data/processed-data/TFT_processed-data.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>dfTFT.head(<span class="dv">5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">match_id</th>
<th data-quarto-table-cell-role="th">puuid</th>
<th data-quarto-table-cell-role="th">placement</th>
<th data-quarto-table-cell-role="th">level</th>
<th data-quarto-table-cell-role="th">time_eliminated</th>
<th data-quarto-table-cell-role="th">total_damage</th>
<th data-quarto-table-cell-role="th">game_length</th>
<th data-quarto-table-cell-role="th">game_version</th>
<th data-quarto-table-cell-role="th">gold_left</th>
<th data-quarto-table-cell-role="th">traits</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">total_items</th>
<th data-quarto-table-cell-role="th">Release_Version</th>
<th data-quarto-table-cell-role="th">total_traits</th>
<th data-quarto-table-cell-role="th">total_units</th>
<th data-quarto-table-cell-role="th">top1</th>
<th data-quarto-table-cell-role="th">top4</th>
<th data-quarto-table-cell-role="th">bottom4</th>
<th data-quarto-table-cell-role="th">champions</th>
<th data-quarto-table-cell-role="th">raw_champions</th>
<th data-quarto-table-cell-role="th">champion_list</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>NA1_5412752266</td>
<td>zkxtkj27xwoevll2byguugjlpldforxw6vscn82z0s4m4w...</td>
<td>8</td>
<td>9</td>
<td>1591.827148</td>
<td>40</td>
<td>2182.824219</td>
<td>Linux Version 15.22.724.5161 (Nov 05 2025/16:1...</td>
<td>1</td>
<td>[{'name': 'TFT15_Bastion', 'num_units': 1, 'st...</td>
<td>...</td>
<td>13</td>
<td>15.22</td>
<td>14</td>
<td>9</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>[]</td>
<td>['TFT15_Aatrox', 'TFT15_DrMundo', 'TFT15_Vi', ...</td>
<td>['Aatrox', 'DrMundo', 'Vi', 'Udyr', 'Sett', 'B...</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>NA1_5412752266</td>
<td>5brr3jrvsrxprqoi2u1vdib7uhyvqh9dbldf7a1dv9_uvw...</td>
<td>1</td>
<td>9</td>
<td>2174.608154</td>
<td>173</td>
<td>2182.824219</td>
<td>Linux Version 15.22.724.5161 (Nov 05 2025/16:1...</td>
<td>61</td>
<td>[{'name': 'TFT15_DragonFist', 'num_units': 1, ...</td>
<td>...</td>
<td>17</td>
<td>15.22</td>
<td>10</td>
<td>10</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>[]</td>
<td>['TFT15_Kayle', 'TFT15_Zac', 'TFT15_Aatrox', '...</td>
<td>['Kayle', 'Zac', 'Aatrox', 'Gangplank', 'Udyr'...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>NA1_5412752266</td>
<td>ilqfyw7mnea2shfj5mvz4yhh6whmkrhoqa8m8otzxvtn71...</td>
<td>6</td>
<td>9</td>
<td>1815.780273</td>
<td>80</td>
<td>2182.824219</td>
<td>Linux Version 15.22.724.5161 (Nov 05 2025/16:1...</td>
<td>0</td>
<td>[{'name': 'TFT15_Bastion', 'num_units': 4, 'st...</td>
<td>...</td>
<td>11</td>
<td>15.22</td>
<td>9</td>
<td>10</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>[]</td>
<td>['TFT15_Ezreal', 'TFT15_Garen', 'TFT15_Rell', ...</td>
<td>['Ezreal', 'Garen', 'Rell', 'Rakan', 'Caitlyn'...</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>NA1_5412752266</td>
<td>yja8q8aza0xq_s9hebroe4adddezonw0abvoc5gprzgmqw...</td>
<td>3</td>
<td>9</td>
<td>2032.849243</td>
<td>124</td>
<td>2182.824219</td>
<td>Linux Version 15.22.724.5161 (Nov 05 2025/16:1...</td>
<td>9</td>
<td>[{'name': 'TFT15_Bastion', 'num_units': 2, 'st...</td>
<td>...</td>
<td>12</td>
<td>15.22</td>
<td>8</td>
<td>9</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>[]</td>
<td>['TFT15_Naafiri', 'TFT15_Lux', 'TFT15_XinZhao'...</td>
<td>['Naafiri', 'Lux', 'XinZhao', 'Viego', 'Samira...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>NA1_5412752266</td>
<td>oubcpr6kdwc2r4zz_msa6ftlulg14fqnrjj9pglbs2z4on...</td>
<td>5</td>
<td>8</td>
<td>1818.687256</td>
<td>84</td>
<td>2182.824219</td>
<td>Linux Version 15.22.724.5161 (Nov 05 2025/16:1...</td>
<td>41</td>
<td>[{'name': 'TFT15_Bastion', 'num_units': 2, 'st...</td>
<td>...</td>
<td>13</td>
<td>15.22</td>
<td>7</td>
<td>8</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>[]</td>
<td>['TFT15_Ezreal', 'TFT15_Garen', 'TFT15_Syndra'...</td>
<td>['Ezreal', 'Garen', 'Syndra', 'Rakan', 'Malzah...</td>
</tr>
</tbody>
</table>

<p>5 rows × 31 columns</p>
</div>
</div>
</div>
<div id="cell-5" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Only use Release Version 15.22</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>dfTFT <span class="op">=</span> dfTFT[dfTFT[<span class="st">"Release_Version"</span>] <span class="op">==</span> <span class="fl">15.22</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-6" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dfTFT.shape</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>(32455, 31)</code></pre>
</div>
</div>
</section>
<section id="this-size-is-a-massive-issue.-way-to-much-for-me-to-run." class="level1">
<h1>This size is a massive issue. Way to much for me to run.</h1>
<div id="cell-8" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert Python Lists </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>dfTFT[<span class="st">"champion_list"</span>] <span class="op">=</span> dfTFT[<span class="st">"champion_list"</span>].<span class="bu">apply</span>(ast.literal_eval)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-9" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop duplicates of the champion comps. This should make the size manageable</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>dfTFT <span class="op">=</span> dfTFT.drop_duplicates(subset<span class="op">=</span>[<span class="st">"champion_list"</span>])</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>dfTFT.shape</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>(10757, 31)</code></pre>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Transform champion_list for HDBScan </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>mlb <span class="op">=</span> MultiLabelBinarizer()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> mlb.fit_transform(dfTFT[<span class="st">"champion_list"</span>])</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>X.shape</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Reduce dimensionality for PCA. Tried it but after removing duplicates I dont think its necessary</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#pca = PCA(n_components = 20)</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#X1 = pca.fit_transform(X)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>(10757, 63)</code></pre>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>clusterer <span class="op">=</span> hdbscan.HDBSCAN(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    min_cluster_size<span class="op">=</span><span class="dv">150</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    min_samples<span class="op">=</span><span class="dv">20</span>, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    metric<span class="op">=</span><span class="st">'euclidean'</span>, </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    cluster_selection_epsilon<span class="op">=</span><span class="fl">0.0</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    cluster_selection_method<span class="op">=</span><span class="st">'leaf'</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Note: We Are using X. Removal of duplicates made dataset manageable</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> clusterer.fit_predict(X)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect cluster sizes</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.Series(labels).value_counts())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>-1     6127
 7      711
 10     701
 5      677
 6      600
 11     522
 0      373
 2      221
 3      174
 4      173
 8      167
 1      160
 9      151
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>champ_names <span class="op">=</span> mlb.classes_</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> describe_clusters(X_bin, labels, champ_names, top_n <span class="op">=</span> <span class="dv">10</span>):</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    df_bin <span class="op">=</span> pd.DataFrame(X_bin, columns<span class="op">=</span>champ_names)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> {}</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> cluster_id <span class="kw">in</span> <span class="bu">sorted</span>(<span class="bu">set</span>(labels)):</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> cluster_id <span class="op">==</span> <span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">=== Noise (cluster -1) ==="</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">=== Cluster </span><span class="sc">{</span>cluster_id<span class="sc">}</span><span class="ss"> ==="</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        rows <span class="op">=</span> df_bin[labels <span class="op">==</span> cluster_id]</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        freq <span class="op">=</span> rows.mean().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(freq.head(top_n))</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        results[cluster_id] <span class="op">=</span> freq.head(top_n)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> results</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>cluster_summary <span class="op">=</span> describe_clusters(X, labels, champ_names)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== Noise (cluster -1) ===
Braum      0.411457
Swain      0.389261
Udyr       0.342908
Shen       0.312061
XinZhao    0.292639
Sett       0.289212
LeeSin     0.279745
Zyra       0.278603
Leona      0.269463
Rell       0.260976
dtype: float64

=== Cluster 0 ===
Malphite       0.986595
Janna          0.949062
Ziggs          0.790885
Sivir          0.772118
Shen           0.764075
Ryze           0.584450
JarvanIV       0.546917
TwistedFate    0.337802
KSante         0.300268
Neeko          0.249330
dtype: float64

=== Cluster 1 ===
Ryze        0.98750
JarvanIV    0.98125
Akali       0.95625
Darius      0.85625
Kennen      0.85000
Senna       0.77500
KSante      0.71875
Aatrox      0.61250
LeeSin      0.41875
Janna       0.19375
dtype: float64

=== Cluster 2 ===
Kobuko      1.000000
Udyr        0.990950
Aatrox      0.977376
Ryze        0.927602
JarvanIV    0.809955
Senna       0.733032
Janna       0.705882
Yasuo       0.411765
KSante      0.285068
Volibear    0.194570
dtype: float64

=== Cluster 3 ===
Lucian       0.994253
Karma        0.994253
Aatrox       0.982759
Senna        0.982759
JarvanIV     0.977011
Gangplank    0.890805
Yone         0.712644
Ryze         0.706897
LeeSin       0.275862
Volibear     0.178161
dtype: float64

=== Cluster 4 ===
Karma       1.000000
Lucian      0.988439
Swain       0.982659
JarvanIV    0.971098
Lux         0.849711
Ryze        0.786127
Gwen        0.774566
Kennen      0.641618
Braum       0.341040
KSante      0.341040
dtype: float64

=== Cluster 5 ===
Poppy        0.985229
Jinx         0.982275
Neeko        0.901034
Rell         0.821270
Kobuko       0.769572
KSante       0.748892
Seraphine    0.556869
Xayah        0.546529
Varus        0.521418
Braum        0.462334
dtype: float64

=== Cluster 6 ===
Garen       0.978333
Rakan       0.941667
Ezreal      0.925000
Leona       0.883333
Yuumi       0.870000
Jayce       0.566667
Katarina    0.556667
Ryze        0.331667
KSante      0.331667
Malzahar    0.318333
dtype: float64

=== Cluster 7 ===
Malzahar     0.700422
Darius       0.696203
Zac          0.677918
Kobuko       0.593530
Poppy        0.530239
Jayce        0.507736
Rammus       0.385373
Aatrox       0.372714
Seraphine    0.288326
Syndra       0.218003
dtype: float64

=== Cluster 8 ===
Rell           0.976048
Leona          0.976048
Braum          0.916168
Swain          0.910180
Shen           0.892216
XinZhao        0.892216
Seraphine      0.862275
TwistedFate    0.844311
Zyra           0.670659
Syndra         0.287425
dtype: float64

=== Cluster 9 ===
Sett        0.993377
Samira      0.986755
XinZhao     0.986755
Naafiri     0.966887
Lux         0.947020
Gwen        0.788079
Volibear    0.761589
Viego       0.576159
Braum       0.423841
Kalista     0.390728
dtype: float64

=== Cluster 10 ===
Udyr           0.984308
Sett           0.831669
DrMundo        0.815977
Naafiri        0.784593
LeeSin         0.681883
Vi             0.650499
TwistedFate    0.529244
Braum          0.526391
Zyra           0.510699
Aatrox         0.452211
dtype: float64

=== Cluster 11 ===
Swain       0.977011
Janna       0.975096
Ashe        0.957854
Vi          0.823755
JarvanIV    0.821839
KSante      0.816092
Zyra        0.775862
Braum       0.599617
Udyr        0.570881
LeeSin      0.496169
dtype: float64</code></pre>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Show clusters via TSNE</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>tsne <span class="op">=</span> TSNE(n_components <span class="op">=</span> <span class="dv">2</span>, perplexity <span class="op">=</span> <span class="dv">30</span>, random_state <span class="op">=</span> <span class="dv">42</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>emb <span class="op">=</span> tsne.fit_transform(X)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">7</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>plt.scatter(emb[:,<span class="dv">0</span>], emb[:,<span class="dv">1</span>], c <span class="op">=</span> labels, s <span class="op">=</span> <span class="dv">3</span>, cmap <span class="op">=</span> <span class="st">'tab20'</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"t-SNE of TFT Boards (colored by PCA+Hierarchical clusters)"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>